CREATE TABLE users (
name VARCHAR(32) NOT NULL,
last_name VARCHAR(32) NOT NULL,
email VARCHAR(64),
nickname VARCHAR(32) NOT NULL,
password VARCHAR(16) NOT NULL,
credit FLOAT NOT NULL,
CONSTRAINT pk_users PRIMARY KEY (email))

CREATE TABLE projects (
code INT,
title VARCHAR(64) NOT NULL,
description VARCHAR(1000) NOT NULL,
deadline VARCHAR(11) NOT NULL,
creation_date VARCHAR(11) NOT NULL,
state INT NOT NULL,
total_bank FLOAT NOT NULL,
last_partition VARCHAR(11) NOT NULL,
partition_bank FLOAT NOT NULL,
gitdir VARCHAR(128),
creator VARCHAR(64),
CONSTRAINT pk_projects PRIMARY KEY (code),
CONSTRAINT fk_creator FOREIGN KEY (creator) REFERENCES users(email))

CREATE TABLE message (
code INT,
date VARCHAR(11) NOT NULL,
issue VARCHAR(32) NOT NULL,
body VARCHAR(1000) NOT NULL,
isread INT NOT NULL,
deleted_sender INT NOT NULL,
deleted_reader INT NOT NULL,
sender VARCHAR(64),
addressee VARCHAR(64),
CONSTRAINT pk_message PRIMARY KEY (code),
CONSTRAINT fk_sender FOREIGN KEY (sender) REFERENCES users(email),
CONSTRAINT fk_addresse FOREIGN KEY (addressee) REFERENCES users(email))

CREATE TABLE news (
code INT,
title VARCHAR(32) NOT NULL,
content VARCHAR(256) NOT NULL,
public_date VARCHAR(11) NOT NULL,
creator VARCHAR(64),
CONSTRAINT pk_news PRIMARY KEY (code),
CONSTRAINT fk_creator_news FOREIGN KEY (creator) REFERENCES users(email))

CREATE TABLE contributions (
project INT,
usr VARCHAR(64),
date VARCHAR(11),
amount FLOAT NOT NULL,
CONSTRAINT pk_contributions PRIMARY KEY(project, usr, date),
CONSTRAINT fk_contributors_project FOREIGN KEY (project) REFERENCES projects(code),
CONSTRAINT fk_contributors_user FOREIGN KEY (usr) REFERENCES users(email))

CREATE TABLE developments (
project INT,
usr VARCHAR(64),
date VARCHAR(11),
gitbranch VARCHAR(128) NOT NULL,
ups INT NOT NULL,
CONSTRAINT pk_developments PRIMARY KEY(project, usr, date),
CONSTRAINT fk_developments_project FOREIGN KEY (project) REFERENCES projects(code),
CONSTRAINT fk_developments_user FOREIGN KEY (usr) REFERENCES users(email))
